name: Dart CI/CD

on:
  push:
    branches:
      - main  # Adjust branch name as per your default branch

jobs:
  build:
    name: Build and Test
    runs-on: macos-latest  # Make sure to use macOS runner since your project is on a Mac Mini

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Setup Flutter
      uses: subosito/flutter-action@v2
      with:
        flutter-version: '3.22.2'  # Replace with your desired Flutter version

    - name: Get dependencies
      run: flutter pub get

    # - name: Run tests
    #   run: flutter test

    - name: Build iOS and Android
      run: |
        flutter build apk

    # - name: Archive artifacts
    #   uses: actions/upload-artifact@v2
    #   with:
    #     name: build-artifacts
    #     path: |
    #       build/app/outputs/apk/release/

  # deploy:
  #   name: Deploy to GitHub Pages  # Example deployment step (adjust as per your needs)
  #   runs-on: ubuntu-latest

  #   needs: build

  #   steps:
  #   - name: Checkout code
  #     uses: actions/checkout@v2

  #   - name: Download artifacts
  #     uses: actions/download-artifact@v2
  #     with:
  #       name: build-artifacts

  #   - name: Deploy to GitHub Pages
  #     uses: JamesIves/github-pages-deploy-action@4.1.5
  #     with:
  #       branch: gh-pages  # Specify your deployment branch
  #       folder: build

# Replace `deploy` section with your deployment strategy (e.g., Firebase, AWS, etc.)
